.container(ng-controller='InvoiceNewCtrl')
  form(name="invoiceForm"
  ng-submit='submit(invoiceForm.$valid)'
  novalidate).container
    .row
      .col-xs-12.col-md-6.col-md-offset-3
        h1 Получить деньги

    fieldset(ng-disabled="submitting")
      .row
        .col-xs-12.col-md-6.col-md-offset-3
          .form-group(
          ng-class="{'has-error': invoiceForm.amount.$invalid && !invoiceForm.amount.$pristine}")
            label(for="amount") Сумма
            input.input.form-control(type="number" name="amount" ng-model='invoice.amount'
            required
            min=config.invoices.minAmount
            max=config.invoices.maxAmount
            only-digits)
            .alert.alert-warning(
            ng-show="invoiceForm.amount.$invalid && !invoiceForm.amount.$pristine").
              Сумма должна быть от #{config.invoices.minAmount} до #{config.invoices.maxAmount}
              рублей.

      .row
        .col-xs-12.col-md-3.col-md-offset-3
          .form-group(
          ng-class="{'has-error': invoiceForm.owner_email.$invalid && !invoiceForm.owner_email.$pristine}")
            label(for="owner_email") Ваш e-mail
            input.form-control(id="owner_email" type="email" name="owner_email" placeholder="Почта"
            ng-model='invoice.owner_email'
            required)

          .form-group(
          ng-class="{'has-error': invoiceForm.owner.$invalid && !invoiceForm.owner.$pristine}")
            label(for="owner") Ваше имя (необязательно)
            input.form-control(name="owner" placeholder="Имя"
            ng-model='invoice.owner'
            required)

        .col-xs-12.col-md-3
          .form-group(
          ng-class="{'has-error': invoiceForm.payer_email.$invalid && !invoiceForm.payer_email.$pristine}")
            label(for="payer_email") От e-mail
            input.form-control(id="payer_email" type="email" name="payer_email" placeholder="Почта"
            ng-model='invoice.payer_email'
            required)

          .form-group(
          ng-class="{'has-error': invoiceForm.payer.$invalid && !invoiceForm.payer.$pristine}")
            label(for="payer_email") От имя
            input.form-control(name="payer" placeholder="Плательщик"
            ng-model='invoice.payer'
            required)

      .row
        .col-xs-12.col-md-6.col-md-offset-3
          .form-group(
          ng-class="{'has-error': invoiceForm.text.$invalid}")
            label(for="text") Комментарий
            input.form-control(name="text" placeholder="Комментарий"
            ng-model='invoice.text'
            maxlength=32)
            p(ng-show="invoiceForm.text.$invalid") Комментарий слишком длинный

        .col-xs-12.col-md-3.col-md-offset-6
          .form-group(ng-hide="submitting")
            button.btn.btn-primary.btn-block(type="submit"
            ng-disabled="invoiceForm.$invalid") Отправить запрос
          .alert.alert-warning(ng-show="submitting").
            Работаем...
