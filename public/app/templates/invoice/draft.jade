.container(ng-controller='InvoiceDraftCtrl')
  form(id="send_invoice", name='form', ng-submit='submit(form.$valid)', novalidate).row
    fieldset(ng-disabled="submitting")
      .col-xs-12.col-md-10.col-md-offset-1
        h1 Осталось ввести номер карты
        p 
          | Затем мы отправим счет на 
          span.font-light {{ invoice.amount | currency:"₽":0 }} 
          | по адресу 
          span.font-light {{ invoice.payer.email }}
          |. Также можно добавить подробности: имена, комментарий к счету и указать дату оплаты.
        
        .error(ng-show='error')
          span.error-icon
          .error-text
            p.error-header Ошибка!
            p {{ error.message }}
      .col-xs-12.col-md-12.col-md-offset-1
        .col-xs-12.col-md-4(id="slide1")
          .form-group
            h3(for='owner_card_number') НОМЕР КАРТЫ
            input.input-lg.form-control(type="text"
            id="owner_card_number"
            name="owner_card_number"
            ng-model="formData.owner_card_number"
            maxlength="16"
            inputmode="numeric"
            autocomplete="cc-number"
            autocompletetype="cc-number"
            x-autocompletetype="cc-number"
            ui-mask='9999 9999 9999 9999'
            required)
          .form-group
            .checkbox
              label
                input(type='checkbox', ng-model="formData.owner_terms_accept", required)
                i
                | Я соглашаюсь на обработку персональных данных и принимаю 
                a(href="/service") Правила работы сервиса
          .form-group
            button.btn.btn-primary.btn-lg.btn-block(type="submit", ng-disabled="form.$invalid") ОТПРАВИТЬ СЧЕТ СРАЗУ
            .show-advanced или 
              a.ajax-link(ng-click="toggleAdvancedForm()", href="") добавить подробности и напоминания

        .col-xs-12.col-md-5.card-col(id="slide2")
          h3 &nbsp;
          card-widget(card-number-input='#owner_card_number')
          .show-advanced.hide(id="edit_card")
              a.ajax-link(ng-click="toggleAdvancedForm()", href="") изменить данные карты
              
        .col-xs-12.col-md-5.offcanvas(id="slide3")
          h3
          .form-group
            label(for="owner") {{ invoice.owner.email }}
            input.input-lg.form-control(type="text", id="owner", name="owner", ng-model="formData.owner", placeholder="Ваше имя")
          .form-group
            label(for="payer") {{ invoice.payer.email }}
            input.input-lg.form-control(type="text", id="payer", name="payer", ng-model="formData.payer", placeholder="Имя плательщика")
          .form-group
            label(for='text') Комментарий
            input.input-lg.form-control(type="text", id="text", name="text", ng-model="formData.text", placeholder="Комментарий")
          .form-group
            label Оплатить счет в течение
            .input-group
             .input-group-btn
               .btn.btn-transparent(datepicker-popup='yyyy-MM-dd'
               ng-class="{'btn-active': datepicker.period=='week'}"
               ng-click="setExpireInWeek()"
               ng-model="formData.expire_at"
               is-open="datepicker.opened"
               custom-class="expire-datepicker"
               datepicker-options="datepickerOptions") Недели
               .btn.btn-transparent(ng-click="setExpireInMonth()"
               ng-class="{'btn-active': datepicker.period=='month'}") Месяца
               .btn.btn-transparent(ng-click="setCustomExpire()"
               ng-class="{'btn-active': datepicker.period=='custom'}") До {{ formData.expire_at | date : 'd MMMM yyyy' }}
          .form-group
            .checkbox
              label
                input(type='checkbox'
                ng-model="formData.remind_daily") 
                = "Ежедневно напоминать об оплате."
                i
          .form-group
            .checkbox
              label
                input(type='checkbox', ng-model="formData.owner_terms_accept", required)
                i
                | Я соглашаюсь на обработку персональных данных и принимаю 
                a(href="/service") Правила работы сервиса
          .form-group
            button.btn.btn-primary.btn-lg.btn-block(type="submit", ng-disabled="form.$invalid") ОТПРАВИТЬ СЧЕТ
