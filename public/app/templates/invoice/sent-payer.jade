.container(ng-controller='InvoicePayCtrl')
  .row(ng-show="loading")
    .col-xs-12 Loading...
      
  form(name="form", ng-submit="submit()", novalidatem, ng-show="invoice")
    fieldset(ng-disabled="submitting")
      .col-xs-12.col-md-6.col-md-offset-3
        h1 Оплата счета
      .col-xs-12.col-md-3.col-md-offset-3  
        .form-group
          label Кому
          .form-control-static {{ invoice.owner_name }}
        .form-group
          label Сумма
          .form-control-static {{ invoice.amount | currency }}
        .form-group
          label Описание
          .form-control-static {{ invoice.text }}
        .form-group
          label Комиссия
          .form-control-static(ng-show='fee.calculated') {{ fee.value | currency }}
          .form-control-static(ng-hide='fee.calculated') Не рассчитана
      .col-xs-12.col-md-3
        .form-group
          label(for="card_number") Номер карты
          input.form-control(id="card_number", name="card_number", type="text", ui-mask="9999 9999 9999 9999", ng-model="card.number", ng-required="true")
          .alert.alert-warning(ng-show="form.card_number.$invalid && form.card_number.$touched && !form.card_number.$pristine") Укажите корректный номер карты
        .form-group
          label(for="card_exp_date") Срок действия
          input.form-control(id="card_exp_date", name="card_exp_date", type="text", ui-mask="99/2099" ng-model="card.exp_date", ng-required="true")
          div.alert.alert-warning(ng-show="form.card_exp_date.$invalid && form.card_exp_date.$touched && !form.card_exp_date.$pristine") Укажите корректный срок действия карты
        .form-group
          label(for="card_cvv") CVV Код
          input.form-control(id="card_cvv", name="card_cvv", type="text", ui-mask="999", ng-model="card.cvv", ng-required="true")
          div.alert.alert-warning(ng-show="form.card_cvv.$invalid && form.card_cvv.$touched && !form.card_cvv.$pristine") Укажите корректный cvv код
        .form-group
          .checkbox
            label
              input(type='checkbox' 
              ng-model="card.payer_terms_accept"
              required)
              = "Я согласен(-на) на обработку персональных данных и с правилами работы сервиса."
        .form-group
          button.btn.btn-default(ng-click="openRefuseDialog()") Отказаться
          input.btn.btn-primary.pull-right(type="submit", value="Оплатить", ng-disabled="form.$invalid || submitting")
          
      .col-xs-12.col-md-6.col-md-offset-3(ng-show="submitting")
        .alert.alert-warning Работаем...
      
  form(name="form_3ds", method="POST", ng-hide="true")
    input(type="hidden", name="PaReq")
    input(type="hidden", name="MD")
    input(type="hidden", name="TermUrl")
